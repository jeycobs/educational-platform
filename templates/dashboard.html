{% extends "base.html" %}

{% block title %}Панель управления - EduPlatform{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">Панель управления</h2>
        <button class="btn btn-success" id="createCourseBtn" style="display: none;" onclick="showCreateCourseModal()">
            <i class="bi bi-plus-circle-fill me-1"></i>Создать курс
        </button>
    </div>

    <div class="row">
        <div class="col-lg-3 mb-4">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-person-fill me-2"></i>Профиль</h5>
                </div>
                <div class="card-body" id="profileInfoContainer">
                    <div class="loading"></div>
                </div>
            </div>
            <div class="card shadow-sm mt-3">
                 <div class="card-header">
                    Навигация
                </div>
                <div class="list-group list-group-flush" id="dashboardTabs">
                    <a href="#my-courses-pane" class="list-group-item list-group-item-action active" data-bs-toggle="tab" role="tab">
                        <i class="bi bi-journals me-2"></i>Мои курсы
                    </a>
                    <a href="#progress-pane" class="list-group-item list-group-item-action" data-bs-toggle="tab" role="tab">
                        <i class="bi bi-graph-up me-2"></i>Мой прогресс
                    </a>
                    <a href="#activity-pane" class="list-group-item list-group-item-action" data-bs-toggle="tab" role="tab">
                        <i class="bi bi-activity me-2"></i>Моя активность
                    </a>
                     <a href="#settings-pane" class="list-group-item list-group-item-action" data-bs-toggle="tab" role="tab">
                        <i class="bi bi-gear-fill me-2"></i>Настройки
                    </a>
                </div>
            </div>
        </div>

        <div class="col-lg-9">
            <div class="tab-content">
                <div class="tab-pane fade show active" id="my-courses-pane" role="tabpanel">
                    <h4 class="mb-3">Все курсы платформы</h4>
                    <div class="row" id="myCoursesContent">
                        <div class="loading"></div>
                    </div>
                </div>
                <div class="tab-pane fade" id="progress-pane" role="tabpanel">
                    <h4 class="mb-3">Ваш прогресс по курсам</h4>
                    <div id="progressContent">
                         <div class="loading"></div>
                    </div>
                </div>
                <div class="tab-pane fade" id="activity-pane" role="tabpanel">
                    <h4 class="mb-3">Ваша недавняя активность</h4>
                    <div id="activityContent">
                        <div class="loading"></div>
                    </div>
                </div>
                 <div class="tab-pane fade" id="settings-pane" role="tabpanel">
                    <h4 class="mb-3">Настройки профиля</h4>
                    <p class="text-muted">Раздел настроек находится в разработке.</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    if (typeof checkAuthAndLoadDashboard === 'function') {
        checkAuthAndLoadDashboard();
    } else {
        console.error('Функция checkAuthAndLoadDashboard не найдена. Убедитесь, что app.js загружен правильно.');
    }
});
</script>
{% endblock %}