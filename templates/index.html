<!-- templates/index.html -->
{% extends "base.html" %}

{% block title %}EduPlatform - Главная{% endblock %}

{% block content %}
<!-- Секция "Герой" -->
<div class="p-5 mb-4 bg-light rounded-3 hero-section bg-gradient text-white">
    <div class="container-fluid py-5">
        <h1 class="display-5 fw-bold">Добро пожаловать на EduPlatform</h1>
        <p class="col-md-8 fs-4">Ваш путь к новым знаниям начинается здесь. Найдите курсы от лучших преподавателей по самым востребованным направлениям.</p>
        <button class="btn btn-light btn-lg" type="button" onclick="showSearchModal()"><i class="bi bi-search me-2"></i>Найти курс</button>
    </div>
</div>

<!-- Секция популярных курсов -->
<h2 class="mb-4">Популярные курсы</h2>
<div class="row" id="coursesContainer">
    <!-- Курсы будут загружены сюда с помощью JavaScript -->
    <div class="loading"></div>
</div>

<!-- Секция категорий -->
<div class="mt-5">
    <h3 class="text-center mb-4">Исследуйте по категориям</h3>
    <div class="d-flex justify-content-center flex-wrap gap-2">
        <button class="btn btn-outline-primary" onclick="performSearchWithCategory('Программирование')">Программирование</button>
        <button class="btn btn-outline-primary" onclick="performSearchWithCategory('Аналитика')">Аналитика</button>
        <button class="btn btn-outline-primary" onclick="performSearchWithCategory('Математика')">Математика</button>
        <button class="btn btn-outline-primary" onclick="performSearchWithCategory('Гуманитарные науки')">Гуманитарные науки</button>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Добавляем функцию для поиска по категории, если ее нет в глобальной области
// В последней версии app.js она уже вынесена в window
if (typeof window.performSearchWithCategory !== 'function') {
    window.performSearchWithCategory = function(category) {
        showSearchModal();
        setTimeout(() => {
            const catEl = document.getElementById('searchCategoryModal');
            const inputEl = document.getElementById('searchInputModal');
            const form = document.getElementById('searchFormModal');
            if (catEl) catEl.value = category;
            if (inputEl) inputEl.value = '';
            if (form) handleSearch({ preventDefault: () => {}, target: form });
        }, 200);
    }
}
</script>
{% endblock %}